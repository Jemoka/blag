<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Commissioner:wght@100;300;400;500;700&family=IBM+Plex+Sans:ital,wght@0,100;0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel=stylesheet><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>window.MathJax={loader:{load:["[tex]/physics"]},tex:{packages:{"[+]":["physics"]}}}</script><title>falsification</title>
<meta name=description content="falsification is the process of systematically finding failures of a particular system to inform future design decisions.
Goals:

enhance system sensors
change the agent&rsquo;s policy
revise the system requirements
adapt the training of human operators
recognize a system as having limitations
&mldr;or abandon the project

Here are some methods
direct falsification

rollout to a ceratin depth
check if any trajectory is a failure and collect
return them

drawback: this doesn&rsquo;t work super well for rare events"><meta name=author content="Houjun Liu"><link rel=stylesheet href=/css/global.css><link rel=stylesheet href=/css/syntax.css></head><body><div class=center-clearfix><header><span id=header-name onclick='window.location.href="/"' style=cursor:pointer>Houjun Liu</span><div id=socialpanel><a href=https://www.jemoka.com/search/ class=header-social id=header-search><i class="ic fa-solid fa-magnifying-glass"></i></i></a>
<a href=https://github.com/Jemoka/ class=header-social id=header-github><i class="ic fa-brands fa-github"></i></a>
<a href=https://bsky.app/profile/jemoka.com class=header-social id=header-twitter><i class="ic fa-brands fa-bluesky"></i></a>
<a href=https://www.reddit.com/user/Jemoka/ class=header-social id=header-reddit><i class="ic fa-brands fa-reddit"></i></a></div></header><div id=title><h1>falsification</h1><span class=tagbox></span></div><aside id=toc><h1 id=toc-title>table of contents</h1><nav id=TableOfContents><ul><li><a href=#direct-falsification>direct falsification</a><ul><li><a href=#dot-dot-dot-how-bad-is-it>&mldr;how bad is it</a></li></ul></li><li><a href=#disturbances>disturbances</a><ul><li><a href=#example>example</a></li><li><a href=#rewriting-environment>rewriting environment</a></li><li><a href=#trajectory-distribution>trajectory distribution</a></li></ul></li><li><a href=#fuzzing>fuzzing</a></li><li><a href=#disturbance-optimization>disturbance optimization</a></li></ul></nav></aside><main><article><div><p><a href=/posts/kbhfalsification/>falsification</a> is the process of systematically finding failures of a particular system to inform future design decisions.</p><p>Goals:</p><ul><li>enhance system sensors</li><li>change the agent&rsquo;s policy</li><li>revise the system requirements</li><li>adapt the training of human operators</li><li>recognize a system as having limitations</li><li>&mldr;or abandon the project</li></ul><p>Here are some methods</p><h2 id=direct-falsification>direct falsification</h2><ul><li>rollout to a ceratin depth</li><li>check if any trajectory is a failure and collect</li><li>return them</li></ul><p><strong>drawback</strong>: this doesn&rsquo;t work super well for rare events</p><h3 id=dot-dot-dot-how-bad-is-it>&mldr;how bad is it</h3><p>\begin{equation}
p_{fail} = \text{probability of failure}
\end{equation}</p><p>we typically don&rsquo;t know this! But suppose we did. Let&rsquo;s define:</p><p>\begin{equation}
p\qty(k): \text{probability we sample a failure on the $k$ th rollout}
\end{equation}</p><p>Meaning, the probability of \((1-p_{fail})^{k-1} p_{fail}\). This is our distribution over \(k\), and it is a geometric distribution! Meaning, it should require \(\frac{1}{p_{fail}}\) simulations on average before we find a singular failure event.</p><h2 id=disturbances>disturbances</h2><p>goal: systematically search for failures by <strong>taking control for the sources of randomness</strong>.</p><p>For instance, consider our observation model:</p><p>\begin{equation}
o \sim O\qty(\cdot | s)
\end{equation}</p><p>let&rsquo;s re-write:</p><p>\begin{equation}
o = O(s, x_0), x_{o} \sim D_{o} \qty(\cdot | s)
\end{equation}</p><p>we are factoring the original model into a deterministic part \(o = O\), and also the stochastic part \(x_{o} \sim D_{o}\). Aesthetically, we typically want \(D\) to be a simple distribution, and perform transformations to the target distribution into \(O\).</p><hr><p>we&rsquo;ll do this for everything</p><p>\begin{equation}
s&rsquo; \sim T \qty(\cdot | s,a) \implies s&rsquo; = T(s,a,x_{s}), x_{s} \sim D_{s}\qty(\cdot | s,a)
\end{equation}</p><p>&mldr;and more</p><p>We can package all of these \(x,D\) up together, into <strong>disturbance</strong> \(x\) and disturbance distribution \(D\).</p><h3 id=example>example</h3><p>Suppose our observation is \(o \sim \mathcal{N} \qty(\cdot | s, \Sigma)\). Let&rsquo;s factor it:</p><p>\begin{equation}
o = s + x_0, x_0 \sim \mathcal{N} \qty(\cdot | 0, \Sigma)
\end{equation}</p><p>that is, the disturbance is the &ldquo;observation noise&rdquo; added to the true state. We just have a disturbance distribution centered at zero which helps us add noise to the observation.</p><h3 id=rewriting-environment>rewriting environment</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#111>step</span><span style=color:#111>(</span><span style=color:#111>sys</span><span style=color:#f92672>::</span><span style=color:#00a8c8>System</span><span style=color:#111>,</span> <span style=color:#111>s</span><span style=color:#f92672>::</span><span style=color:#00a8c8>State</span><span style=color:#111>,</span> <span style=color:#111>D</span><span style=color:#f92672>::</span><span style=color:#00a8c8>DisturbanceDistributino</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>xo</span> <span style=color:#f92672>=</span> <span style=color:#111>rand</span><span style=color:#111>(</span><span style=color:#111>D</span><span style=color:#f92672>.</span><span style=color:#111>Do</span><span style=color:#111>(</span><span style=color:#111>s</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>    <span style=color:#111>o</span> <span style=color:#f92672>=</span> <span style=color:#111>sys</span><span style=color:#f92672>.</span><span style=color:#111>sensor</span><span style=color:#111>(</span><span style=color:#111>s</span><span style=color:#111>,</span> <span style=color:#111>xo</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>xa</span> <span style=color:#f92672>=</span> <span style=color:#111>rand</span><span style=color:#111>(</span><span style=color:#111>D</span><span style=color:#f92672>.</span><span style=color:#111>Da</span><span style=color:#111>(</span><span style=color:#111>o</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>    <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>sys</span><span style=color:#f92672>.</span><span style=color:#111>agent</span><span style=color:#111>(</span><span style=color:#111>o</span><span style=color:#111>,</span><span style=color:#111>xa</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>xs</span> <span style=color:#f92672>=</span> <span style=color:#111>rand</span><span style=color:#111>(</span><span style=color:#111>D</span><span style=color:#f92672>.</span><span style=color:#111>Ds</span><span style=color:#111>(</span><span style=color:#111>s</span><span style=color:#111>,</span><span style=color:#111>a</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>    <span style=color:#111>s′</span> <span style=color:#f92672>=</span> <span style=color:#111>sys</span><span style=color:#f92672>.</span><span style=color:#111>env</span><span style=color:#111>(</span><span style=color:#111>s</span><span style=color:#111>,</span><span style=color:#111>a</span><span style=color:#111>,</span><span style=color:#111>xs</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># storing for bookeeping</span>
</span></span><span style=display:flex><span>    <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>Disturbance</span><span style=color:#111>(</span><span style=color:#111>xa</span><span style=color:#111>,</span> <span style=color:#111>xs</span><span style=color:#111>,</span> <span style=color:#111>xo</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>return</span> <span style=color:#111>(;</span> <span style=color:#111>o</span><span style=color:#111>,</span> <span style=color:#111>a</span><span style=color:#111>,</span> <span style=color:#111>s′</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div><h3 id=trajectory-distribution>trajectory distribution</h3><p>Recall: sources of randomness for a rollout &mdash; 1) the initial state, and 2) the disturbance distribution applied at each step.</p><p>We can actually then specify this <a href=#trajectory-distribution>trajectory distribution</a> with the following properties:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#00a8c8>abstract type</span> <span style=color:#00a8c8>TrajectoryDistribution</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#111>initial_state_distribution</span><span style=color:#111>(</span><span style=color:#111>p</span><span style=color:#f92672>::</span><span style=color:#00a8c8>TrajectoryDistribution</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#111>distriburbance_distribution</span><span style=color:#111>,</span> <span style=color:#111>t</span><span style=color:#f92672>::</span><span style=color:#00a8c8>Timestamp</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#111>depth</span><span style=color:#111>(</span><span style=color:#111>p</span><span style=color:#f92672>::</span><span style=color:#00a8c8>TrajectoryDistribution</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span></code></pre></div><p>we can then roll this system out:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#111>rollout</span><span style=color:#111>(</span><span style=color:#111>p</span><span style=color:#f92672>::</span><span style=color:#00a8c8>TrajectoryDistribution</span><span style=color:#111>;</span> <span style=color:#111>d</span><span style=color:#f92672>=</span><span style=color:#111>depth</span><span style=color:#111>(</span><span style=color:#111>p</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>    <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#111>rand</span><span style=color:#111>(</span><span style=color:#111>initial_state_distribution</span><span style=color:#111>(</span><span style=color:#111>p</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>    <span style=color:#111>τ</span> <span style=color:#f92672>=</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>for</span> <span style=color:#111>t</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#111>d</span>
</span></span><span style=display:flex><span>        <span style=color:#111>o</span><span style=color:#111>,</span><span style=color:#111>a</span><span style=color:#111>,</span><span style=color:#111>s′</span> <span style=color:#f92672>=</span> <span style=color:#111>step</span><span style=color:#111>(</span><span style=color:#111>s</span><span style=color:#111>,</span> <span style=color:#111>distriburbance_distribution</span><span style=color:#111>(</span><span style=color:#111>p</span><span style=color:#111>,</span><span style=color:#111>t</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>        <span style=color:#111>push!</span><span style=color:#111>(</span><span style=color:#111>τ</span><span style=color:#111>,</span> <span style=color:#111>(</span><span style=color:#111>s′</span><span style=color:#111>,</span><span style=color:#111>o</span><span style=color:#111>,</span><span style=color:#111>a</span><span style=color:#111>,</span><span style=color:#111>x</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>        <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#111>s′</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div><p>a normal rollout can be factored to this via a &ldquo;nominal trajectory distribution&rdquo; .</p><h2 id=fuzzing>fuzzing</h2><p>input a non-nominal <a href=#trajectory-distribution>trajectory distribution</a> to cause failure. Usually, we do this by increasing variance off the nominal distirbution.</p><h2 id=disturbance-optimization>disturbance optimization</h2><p>we want to systematically search over initial states and <em><strong>sequences</strong> of disturbances</em> of find failure trajectories.</p><p>\begin{align}
\min_{s,x} &\ f\qty(\tau) \\
s.t. &\ \tau = RO(s,x)
\end{align}</p><p>where \(f(\tau)\) represents &ldquo;closeness to failure&rdquo;.</p></div></article></main><footer><p id=footer>&copy; 2019-2025 Houjun Liu. Licensed CC BY-NC-SA 4.0.</p></footer></div></body></html>